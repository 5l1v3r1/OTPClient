language: c

branches:
  only:
    - master

compiler:
  - gcc
  - clang

build:
  ci:
    - sudo apt update
    - sudo apt install cmake libgtk-3-dev libgcrypt20-dev libzip-dev libjson-glib-dev
    - git clone https://github.com/paolostivanin/libbaseencode.git
    - cd libbaseencode && mkdir build && cd $_
    - cmake .. -DCMAKE_INSTALL_PREFIX=/usr
    - make
    - sudo make install
    - cd ../..
    - git clone https://github.com/paolostivanin/libcotp.git
    - cd libcotp && mkdir build && cd $_
    - cmake .. -DCMAKE_INSTALL_PREFIX=/usr
    - make
    - sudo make install
    - cd ../..    
    - mkdir build && cd $_
    - cmake .. -DCMAKE_INSTALL_PREFIX=/usr
    - make
